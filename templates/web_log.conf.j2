# -------------------------------------------
# nginx log on various distros

# debian, arch
nginx_log:
  name: 'nginx'
  path: '/var/log/nginx/access.log'

# gentoo
nginx_log2:
  name: 'nginx'
  path: '/var/log/nginx/localhost.access_log'


# -------------------------------------------
# apache log on various distros

# debian
apache_log:
  name: 'apache'
  path: '/var/log/apache2/access.log'

# gentoo
apache_log2:
  name: 'apache'
  path: '/var/log/apache2/access_log'

# arch
apache_log3:
  name: 'apache'
  path: '/var/log/httpd/access_log'

# debian
apache_vhosts_log:
  name: 'apache_vhosts'
  path: '/var/log/apache2/other_vhosts_access.log'


# -------------------------------------------
# gunicorn log on various distros

gunicorn_log:
  name: 'gunicorn'
  path: '/var/log/gunicorn/access.log'

gunicorn_log2:
  name: 'gunicorn'
  path: '/var/log/gunicorn/gunicorn-access.log'

# -------------------------------------------
# OpenIO SDS logs
OPENIO-rawx-1:
 name: '.openio.OPENIO.rawx.rawx-1.log.access'
 path: '/var/log/oio/sds/OPENIO/rawx-1/rawx-1-httpd-access.log'
 custom_log_format:
   pattern: '\S+ \S+ \S+ \S+ \S+ \d+ \d+ \S+ \S+ (?P<address>\S+) \S+ (?P<method>\S+) (?P<code>\d+) (?P<resp_time>\d+) (?P<bytes_sent>\d+) \S+ \S+ (?P<url>.*)'

###
{% for rawx in netdata_openio_rawxlogs.stdout_lines %}
{{ rawx | regex_replace('/etc/oio/sds/(\w+)/.*', '\1') }}-{{ rawx | regex_replace('/etc/oio/sds/\w+/(\w+-\w+)', '\1') }}:
  name: '.openio.{{ rawx | regex_replace('/etc/oio/sds/(\w+)/.*', '\1') }}.rawx.{{ rawx | regex_replace('/etc/oio/sds/\w+/(\w+-\w+)', '\1') }}.log.access'
  path: '/var/log/oio/sds/{{ rawx | regex_replace('/etc/oio/sds/(\w+)/.*', '\1') }}/{{ rawx | regex_replace('/etc/oio/sds/\w+/(\w+-\w+)', '\1') }}/{{ rawx | regex_replace('/etc/oio/sds/\w+/(\w+-\w+)', '\1') }}-httpd-access.log'
  custom_log_format:
    pattern: '\S+ \S+ \S+ \S+ \S+ \d+ \d+ \S+ \S+ (?P<address>\S+) \S+ (?P<method>\S+) (?P<code>\d+) (?P<resp_time>\d+) (?P<bytes_sent>\d+) \S+ \S+ (?P<url>.*)'
{% endfor %}
####
{% for meta in netdata_openio_metalogs.stdout_lines %}
{{ meta | regex_replace('/etc/oio/sds/(\w+)/.*', '\1') }}-{{ meta | regex_replace('/etc/oio/sds/\w+/(\w+-\w+)/.*', '\1') }}:
  name: '.openio.{{ meta | regex_replace('/etc/oio/sds/(\w+)/.*', '\1') }}.{{ meta | regex_replace('/etc/oio/sds/\w+/(\w+)-\w+/.*', '\1') }}.{{ meta | regex_replace('/etc/oio/sds/\w+/(\w+-\w+)/.*', '\1') }}.log.access'
  path: '/var/log/oio/sds/{{ meta | regex_replace('/etc/oio/sds/(\w+)/.*', '\1') }}/{{ meta | regex_replace('/etc/oio/sds/\w+/(\w+-\w+)/.*', '\1') }}/{{ meta | regex_replace('/etc/oio/sds/\w+/(\w+-\w+)/.*', '\1') }}.access'
  custom_log_format:
    pattern: '\S+ \S+ \S+ \S+  \S+ \S+ \S+ \S+ (?P<address>\S+) \S+ (?P<method>\S+) (?P<code>\d+) (?P<resp_time>\d+) (?P<bytes_sent>\d+) \S+ \S+ \S+ (?P<url>.*)'
{% endfor %}
